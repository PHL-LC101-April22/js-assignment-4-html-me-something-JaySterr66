!function(s,c){"use strict";var o=s.YAHOO=s.YAHOO||{},n=o.NB||{},a=o.SP=o.SP||{},i="rs-",l={offset:"-o",index:"-i"},e="#main-algo",t=".grp-talgo",g=".grp-talgo-ext .compList .s-sitelink",d=".rs-section",r=".rs-row",u=".rs-block",h=".rs-label",v=".rs-bp",S=/\brs-bp\b/g,f=".rs-right",p=".grp-talgo-ext",A=".algo",C=".compText",m=".qlset",y="NavigationCard",E="rs-hidden",N="trans-in",R="trans-out",b={BEACON:{standard:{_S:"",pvid:"",mtestid:"",sec:"rel-algo",it:"sys_algo_rs",prd:"rs_algo"},close:{pos:"",t4pos:"0"},click:{pos:"",t4pos:""},view:{rs:0,pos:""}}},O="offset",B="hashKey",q="relItems",I="inPlaceRSNodes";function k(){}k.ATTRS={itemPerRow:{value:2},baseRequeryUrl:{value:""},isControl:{value:!1},showAlgoDesc:{value:!1},instrumentation:{value:{}},action:{value:"touchstart"},defaultAlgoGroup:{value:p},algoMain:{value:e},algoLink:{value:t},algoItem:{value:A},rsItem:{value:r}},k.prototype={initializer:function(){var t,e,r=this;r.get(I)&&(t=[],(e=c.querySelectorAll(r.get("algoItem")+" "+d))&&(e.forEach(function(e){e=e.querySelectorAll(h).length;e&&t.push(Array(e).fill(e))}),t.length&&r.set(q,t))),r.isSessionStorageSupport()&&r.has(q)&&r.has(B)&&!isNaN(r.get(O))&&(r.triggeredIdx=Array(r.get(q).length),r.upToDate=!1,r.updateBeaconsObj(),r.bindRelatedSearchesListener(),r.bindAlgoEvtHandling(),r.triggerRelatedSearches())},isSessionStorageSupport:function(){try{return!!s.sessionStorage}catch(e){return!1}},isHistorySupport:function(){return!(!s.history||!s.history.replaceState)},updateBeaconsObj:function(){b.BEACON.standard._S=a.ULT.get("spaceid"),b.BEACON.standard.pvid=a.ULT.get("pvid"),b.BEACON.standard.mtestid=encodeURIComponent(a.ULT.get("mtestid"));var e=this.get("instrumentation");e.it&&(b.BEACON.standard.it=e.it),e.sec&&(b.BEACON.standard.sec=e.sec)},bindRelatedSearchesListener:function(){var e=this,t=e.triggerRelatedSearches.bind(e);o.Event.listen(s,"pageshow",function(){t()}),o.Event.listen(s,"load",function(){t()}),o.Event.listen(c,"visibilitychange",function(){"visible"===c.visibilityState&&t()}),e.isHistorySupport()&&o.Event.listen(s,"popstate",function(){t()})},bindAlgoEvtHandling:function(){var e=this,t=e.get("action"),r=c.querySelector(e.get("algoMain"));r&&(o.Event.delegate(t,e._evtAlgoLinkClk,r,e.get("algoLink"),e),o.Event.delegate(t,e._evtAlgoLinkClk,r,g,e),o.Event.delegate("click",e._evtRelatedSearchClk,r,u,e),e.get("isControl")||o.Event.delegate("click",e._evtCloseClicked,r,f,e))},replaceHistoryStateIfNecessary:function(){this.isHistorySupport()&&(s.history.state||s.history.replaceState({},null))},triggerRelatedSearches:function(){var e,t,r,o=this;o.upToDate||(e=o.getSessionStorageValidated(),o.recoverHiddenAlgoContent(),e&&!e.shown&&o.updateRelatedSearchUI(e.index)&&(r=parseInt(e.index),"object"==typeof(t=o.get(q))[r]&&o.sendRsViewBeacon({pos:r+1,rs:t[r].length,query:encodeURIComponent(o.get("query"))}),o.upToDate=!0,e.shown=!0,o.updateSessionStorage(e)))},recoverHiddenAlgoContent:function(){var e,t;this.get("isControl")||(e=c.querySelectorAll(d),t=c.querySelectorAll("."+E),e&&(n.removeClass(e,R),n.removeClass(e,N)),t&&n.removeClass(t,E))},createRelatedSearchNode:function(e){var t,r,o,n,s,a,i=this,l=c.querySelector(v),g=i.get("itemPerRow");if(!l||0==e.length)return null;for(r=(t=l.cloneNode(!0)).querySelectorAll(i.get("rsItem")),l=Math.min(r.length,Math.floor(e.length/g)),e.length=Math.min(e.length,l*g),n=l;n<r.length;n++)r[n].remove();for(o=t.querySelectorAll(u+" a"),n=0;n<e.length;n++)s=o[n],a=e[n],s.innerHTML=a,s.href=i.get("baseRequeryUrl")+"&p="+encodeURIComponent(s.text);return t.className=t.className.replace(S,""),t},createRelatedSearchNodeForAlgo:function(e){var t=this,r=t.getKthAlgoElement(e),o=t.get(q);if(!t.get(I)&&t.shouldCreateRsNode(e)){if(!(o=t.createRelatedSearchNode(o[e])))return!1;r.appendChild(o),t.triggeredIdx[e]=!0}return!0},shouldCreateRsNode:function(e){return e<this.get(q).length&&!this.triggeredIdx[e]},updateRelatedSearchUI:function(e){var t,r=this,o=r.getKthAlgoElement(e);return!!(o&&r.createRelatedSearchNodeForAlgo(e)&&(t=o.querySelector(d)))&&(r.get("isControl")||(n.removeClass(t,R),n.addClass(t,N),n.hasClass(o,y)?((t=o.querySelector(C))&&n.addClass(t,E),(t=o.querySelectorAll(m))&&n.addClass(t,E)):(o=o.querySelectorAll(r.get("defaultAlgoGroup")))&&!r.get("showAlgoDesc")&&n.addClass(o,E)),!0)},getAlgoElements:function(){return this.algoEls===undefined&&(this.algoEls=c.querySelectorAll(this.get("algoItem"))),this.algoEls},getKthAlgoElement:function(e){var t=this.getAlgoElements();return e<t.length?t[e]:null},getSessionStorageValidated:function(){var e=this.getSessionStorage();return e.offset==this.get(O)?e:null},updateSessionStorage:function(e){var t,r,o=this.get(B);if(s.sessionStorage)for(r in t=i+o,l)r in e&&s.sessionStorage.setItem(t+l[r],e[r])},getSessionStorage:function(){var e,t,r,o={},n=this.get(B);if(s.sessionStorage)for(t in e=i+n,l)(r=s.sessionStorage.getItem(e+l[t]))&&(o[t]=r);return o},removeSessionStorage:function(){var e,t,r=this.get(B);if(s.sessionStorage)for(t in e=i+r,l)s.sessionStorage.removeItem(e+l[t])},sendRsClickBeacon:function(e,t){if("object"==typeof e)for(var r in e)b.BEACON.click[r]=e[r];var o=n.clone(b.BEACON.standard);n.merge(o,b.BEACON.click),this._sendBeacon(o,!1,function(){s.location.href=t},500)},sendRsCloseBeacon:function(e){if(0<Object.keys(e).length)for(var t in e)b.BEACON.close[t]=e[t];var r=n.clone(b.BEACON.standard);n.merge(r,b.BEACON.close),this._sendBeacon(r,!1)},sendRsViewBeacon:function(e){if(0<Object.keys(e).length)for(var t in e)b.BEACON.view[t]=e[t];var r=n.clone(b.BEACON.standard);n.merge(r,b.BEACON.view),this._sendBeacon(r,!0)},_evtCloseClicked:function(e){var t,r=this.getSessionStorage();e.stopPropagation(),0<Object.keys(r).length&&(this.sendRsCloseBeacon({pos:parseInt(r.index)+1,query:this.get("query")}),this.removeSessionStorage(),(t=o.DOM.ancestor(e.currentTarget,d))&&(n.removeClass(t,N),n.addClass(t,R),e=(r=o.DOM.ancestor(t,this.get("algoItem"),!0)).querySelectorAll(this.get("defaultAlgoGroup")),t=r.querySelector(C),r=r.querySelector(m),e&&n.removeClass(e,E),t&&n.removeClass(t,E),r&&n.removeClass(r,E)))},_evtRelatedSearchClk:function(e){e.preventDefault(),e.stopPropagation();var t=this,r=e.currentTarget.querySelector(h),o=r.innerText||"",n=r.getAttribute("data-index")||-1,s=e.currentTarget.querySelector("a"),a=s?s.getAttribute("href"):"",s=t.get("itemProviders")||[],r=r.getAttribute("data-labelsrc"),e=t._getAlgoIndex(e);-1!==e&&-1!==n&&""!==o&&""!==a&&(o={pos:e+1,t4pos:n,ltxt:o,query:t.get("query")},t.get(q).length===s.length?o.trigSrc=s[e][n-1]:r&&(o.trigSrc=r),t.sendRsClickBeacon(o,a))},_evtAlgoLinkClk:function(e){var t=this,e=t._getAlgoIndex(e);0<=e&&(t.replaceHistoryStateIfNecessary(),t.updateSessionStorage({offset:t.get(O),index:e}),t.upToDate=!1)},_getAlgoIndex:function(e){var t=-1,r=this.getAlgoElements();return r&&(e=o.DOM.ancestor(e.currentTarget,this.get("algoItem"),!0),t=o.DOM.indexOf(e,r)),t},_sendBeacon:function(e,t,r,o){t?a.ULT.view_beacon(e):a.ULT.beacon(e,r,o)}},a.AlgoRsItem=k}(window,document);!function(e,c){"use strict";var d=e.YAHOO=e.YAHOO||{},n=d.NB||{},e=d.SP=d.SP||{};function s(){}s.prototype={initializer:function(){var e=this,s=e.get("config");s.triggerClass&&(e.config=s,e.trigSelector="."+s.triggerClass,e.trigGroupSelector="#"+s.triggerGroup,e.listSelector="."+s.listClass,e.moduleSelector="."+s.moduleClass,e.xOffset=s.xOffset?parseInt(s.xOffset):0,e.yOffset=s.yOffset?parseInt(s.yOffset):0,e.gridLeftGutter=s.gridLeftGutter?parseInt(s.gridLeftGutter):124,e.selectedClass=s.selectedClass||"OptSelected",e.hideClass=s.hideClass||"d-n",e.posAbs=s.posAbsClass||"p-a",e.posRelClass=s.posRelClass||"p-r",d.Event.delegate("click",e.handleClickEvent,c.querySelector(e.trigGroupSelector),e.moduleSelector+" "+e.trigSelector,e),d.Event.outside("click",e.handleClickOutside.bind(e),e.checkInside.bind(e)))},checkInside:function(e){return n.hasClass(e,this.config.triggerClass)||n.hasClass(e,this.config.listClass)},handleClickEvent:function(e){var s,t,l,i=this,r=e.target,o=c.querySelector("."+i.selectedClass),a=d.DOM.ancestor(r,i.moduleSelector),e=!1;o&&(e=a.contains(o),i.hide(o),e)||(s=a.querySelector(i.listSelector),n.addClass(s,i.posAbs),n.addClass(a,i.posRelClass),i.get("posToHost")?(t=d.DOM.getX(r)-d.DOM.getX(a)+i.xOffset,l=d.DOM.getY(r)-d.DOM.getY(a)+i.yOffset,d.DOM.setX(s,t),d.DOM.setY(s,l)):(l=c.querySelector(i.trigGroupSelector),t=d.DOM.getX(r)-i.yOffset,0==d.DOM.getComputed(l,"marginLeft")&&(t+=i.gridLeftGutter),d.DOM.setX(s,t)),n.hasClass(s,i.hideClass)&&i.show(s))},handleClickOutside:function(){var e=this,s=c.querySelector(e.listSelector+"."+e.selectedClass);s&&e.hide(s)},show:function(e){n.removeClass(e,this.hideClass),n.addClass(e,this.selectedClass)},hide:function(e){n.addClass(e,this.hideClass),n.removeClass(e,this.selectedClass)}},e.compModuleDropDown=s}(window,document);